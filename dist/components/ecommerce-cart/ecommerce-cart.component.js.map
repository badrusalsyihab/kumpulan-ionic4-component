{"version":3,"file":"ecommerce-cart.component.js","sourceRoot":"","sources":["../../../src/components/ecommerce-cart/ecommerce-cart.component.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,SAAS,EAAU,KAAK,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,eAAe,CAAC;AAC/E,OAAO,EAAE,aAAa,EAAE,MAAM,gBAAgB,CAAC;AAC/C,IAAM,aAAa,GAAG,0sLAkHrB,CAAC;AAEF,IAAM,SAAS,GAAG,s2DAuGjB,CAAC;AAMF;IAQE,gCACU,OAAsB;QAAtB,YAAO,GAAP,OAAO,CAAe;QANtB,cAAS,GAAG,IAAI,YAAY,EAAE,CAAC;QAEzC,cAAS,GAAY,IAAI,CAAC;QAC1B,eAAU,GAAY,IAAI,CAAC;IAIvB,CAAC;IAEL,yCAAQ,GAAR;IACA,CAAC;IAED,uCAAM,GAAN,UAAO,CAAC;QACN,CAAC,CAAC,GAAG,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAClC,CAAC;IAED,0CAAS,GAAT,UAAU,CAAC;QACT,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE;YACb,CAAC,CAAC,GAAG,EAAE,CAAC;YACR,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACjC;IACH,CAAC;IAED,8CAAa,GAAb,UAAc,CAAC,EAAE,CAAC;QAAlB,iBAeC;QAdC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;YACtB,IAAI,CAAC,EAAE;gBACL,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO;oBACzC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;oBACzB,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;gBAClC,CAAC,CAAC,CAAC;aACJ;iBAAM;gBACL,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO;oBACzC,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC;oBAC1B,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;gBAClC,CAAC,CAAC,CAAC;aACJ;YACD,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;SAC1B;IACH,CAAC;IAED,iDAAgB,GAAhB,UAAiB,CAAC;QAAlB,iBAOC;QANC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO;YACzC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;gBACtB,KAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,KAAK,CAAC;aACjC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,6CAAY,GAAZ,UAAa,CAAC,EAAE,GAAG;QACjB,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAChC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED,2CAAU,GAAV,UAAW,CAAC,EAAE,GAAG;QACf,IAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QACpD,IAAI,OAAO,EAAE;YACX,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACjC;IACH,CAAC;IAED,2CAAU,GAAV;QACE,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;IACvC,CAAC;IAnEQ;QAAR,KAAK,EAAE;;yDAAY;IACV;QAAT,MAAM,EAAE;;6DAAgC;IAH9B,sBAAsB;QALlC,SAAS,CAAC;YACT,QAAQ,EAAE,oBAAoB;YAC9B,QAAQ,EAAE,aAAa;YACvB,MAAM,EAAE,CAAC,SAAS,CAAC;SACpB,CAAC;yCAUmB,aAAa;OATrB,sBAAsB,CAuElC;IAAD,6BAAC;CAAA,AAvED,IAuEC;SAvEY,sBAAsB","sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { NavController } from '@ionic/angular';\r\nconst HTML_TEMPLATE = `\r\n<div *ngIf=\"datas.length > 0\">\r\n  <div *ngFor=\"let item of datas;let i = index;\">\r\n    <ion-grid class=\"background-grid\" *ngIf=\"!item.shop.products.length == 0\" style=\"padding-top:0;padding-bottom:0;\">\r\n      <ion-row no-padding>\r\n        <ion-col size=\"1.2\" style=\"padding-top:0;padding-right:0;padding-bottom:0;\">\r\n          <p class=\"p-shop-name-style\">\r\n            <ion-checkbox name=\"{{item._id}}\" color=\"danger\" [(ngModel)]=\"item.isChecked\" (click)=\"datas[i].flag = true\"\r\n              (ngModelChange)=\"selectAllProd(item.isChecked,i)\"></ion-checkbox>\r\n          </p>\r\n        </ion-col>\r\n        <ion-col size=\"1.1\" no-padding>\r\n          <div class=\"image-shop-div-style\" *ngIf=\"item && item.shop && item.shop.image && item.shop.image.url\">\r\n            <img class=\"image-shop-style\" [src]=\"item.shop.image.url\">\r\n          </div>\r\n          <div class=\"image-shop-div-style\" *ngIf=\"!item || !item.shop || !item.shop.image || !item.shop.image.url\">\r\n            <img class=\"image-shop-style\" src=\"assets/images/gray-bg.png\">\r\n          </div>\r\n        </ion-col>\r\n        <ion-col size=\"9\" no-padding>\r\n          <p class=\"shop-name-style p-shop-name-style\">{{item.shop.name}}</p>\r\n        </ion-col>\r\n      </ion-row>\r\n\r\n      <div *ngFor=\"let itm of item.shop.products;let idx = index;\">\r\n        <ion-row class=\"div-prod-style\">\r\n          <ion-col size=\"1\">\r\n            <p>\r\n              <ion-checkbox name=\"{{itm._id}}\" id=\"{{itm._id}}\" color=\"danger\" style=\"margin-top: 10px;\" [(ngModel)]=\"itm.isChecked\"\r\n                (ngModelChange)=\"selectByItem(i,itm)\"></ion-checkbox>\r\n            </p>\r\n          </ion-col>\r\n          <ion-col size=\"3\">\r\n            <div *ngIf=\"itm && itm.image && itm.image.url\">\r\n              <img [src]=\"itm.image.url\" class=\"image-product-style\">\r\n            </div>\r\n            <div *ngIf=\"!itm || !itm.image || !itm.image.url\">\r\n              <img src=\"assets/images/gray-bg.png\" class=\"image-product-style\">\r\n            </div>\r\n          </ion-col>\r\n          <ion-col size=\"8\">\r\n            <ion-grid no-padding>\r\n              <ion-row no-padding>\r\n                <ion-col size=\"11\" no-padding>\r\n                  <p class=\"product-name-text\" style=\"margin-bottom: 0;margin-top: 0;\">\r\n                    <!-- <span>(สีดำ)</span> -->\r\n                    {{itm.name}}\r\n                  </p>\r\n                </ion-col>\r\n                <ion-col size=\"1\" no-padding>\r\n                  <p style=\"margin-bottom: 0;margin-top: 0;\">\r\n                    <ion-icon name=\"ios-trash\" class=\"icon-del-style\" (click)=\"delProduct(i,idx)\"></ion-icon>\r\n                  </p>\r\n                </ion-col>\r\n              </ion-row>\r\n            </ion-grid>\r\n            <ion-grid style=\"text-align: center;margin-top: 5px;\" no-padding>\r\n              <ion-row style=\"height: 25px;\" no-padding>\r\n                <ion-col size=\"2\" style=\"border:solid 1px lightgray;\" no-padding>\r\n                  <ion-button color=\"light\" fill=\"clear\" (click)=\"deleteQty(itm)\" [disabled]=\"itm.qty == 1\">\r\n                    <span class=\"qty-button-style\">-</span>\r\n                  </ion-button>\r\n                </ion-col>\r\n                <ion-col size=\"2\" style=\"border-top:solid 1px lightgray;border-bottom:solid 1px lightgray;\" no-padding>\r\n                  <ion-input class=\"input-qty\" type=\"number\" [(ngModel)]=\"itm.qty\"></ion-input>\r\n                </ion-col>\r\n                <ion-col size=\"2\" style=\"border:solid 1px lightgray;\" no-padding>\r\n                  <ion-button color=\"light\" fill=\"clear\" (click)=\"addQty(itm)\">\r\n                    <span class=\"qty-button-style1\">+</span>\r\n                  </ion-button>\r\n                </ion-col>\r\n                <ion-col text-left>\r\n                  <span style=\"color:gray;font-size: 13px;\">\r\n                    {{itm.price.name}}\r\n                  </span>\r\n                </ion-col>\r\n              </ion-row>\r\n            </ion-grid>\r\n            <ion-grid no-padding>\r\n              <ion-row no-padding style=\"width: 150px;\" *ngIf=\"!itm.price.newpricetext && itm.price.pricetext\">\r\n                <ion-col no-padding>\r\n                  <p class=\"new-price-text-style\">{{itm.price.pricetext}}</p>\r\n                </ion-col>\r\n                <ion-col no-padding style=\"margin-left: -42px;\">\r\n                  <p class=\"new-price-text-style\">{{itm.price.newpricetext}}</p>\r\n                </ion-col>\r\n              </ion-row>\r\n              <ion-row no-padding style=\"width: 150px;\" *ngIf=\"itm.price.newpricetext && itm.price.pricetext\">\r\n                <ion-col no-padding>\r\n                  <p class=\"price-text-style\">{{itm.price.pricetext}}</p>\r\n                </ion-col>\r\n                <ion-col no-padding style=\"margin-left: -42px;\">\r\n                  <p class=\"new-price-text-style\">{{itm.price.newpricetext}}</p>\r\n                </ion-col>\r\n              </ion-row>\r\n            </ion-grid>\r\n          </ion-col>\r\n        </ion-row>\r\n      </div>\r\n    </ion-grid>\r\n    <br>\r\n  </div>\r\n</div>\r\n<div *ngIf=\"datas.length <= 0\">\r\n  <ion-grid>\r\n    <ion-row>\r\n      <ion-col size=\"12\" text-center align-self-center style=\"margin-top: 50px;\">\r\n        <img style=\"width: 80px;\" src=\"https://res.cloudinary.com/dyiuidzsc/image/upload/v1540788716/furnover/png/productLogo.png\">\r\n        <p>รถเข็นสินค้าของคุณว่าง</p>\r\n        <ion-button class=\"color-button-shop\" (click)=\"toHomePage()\">ช็อปตอนนี้</ion-button>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n</div>\r\n`;\r\n\r\nconst CSS_STYLE = `\r\n.background-grid {\r\n  background-color:white !important ;\r\n  }\r\n  \r\n  .image-shop-div-style{\r\n      width: 25px;\r\n      position: absolute;\r\n      top: 0%;\r\n      left: 0%;\r\n      right: 0%;\r\n      bottom: 0%;\r\n      padding-top: 8px;\r\n  \r\n  }\r\n  \r\n  .image-shop-style{\r\n      border-radius: 50% !important ;\r\n  }\r\n  \r\n  .shop-name-style {\r\n      font-size: 14px;\r\n      padding-top: 2px;\r\n  }\r\n  \r\n  .p-shop-name-style{\r\n      margin-top: 10px;\r\n      margin-bottom: 10px;\r\n  }\r\n  \r\n  .border-header {\r\n      border-bottom: solid 1px lightgray;\r\n  }\r\n  \r\n  .product-name-text {\r\n      text-overflow: ellipsis !important;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      font-size: 14px;\r\n  }\r\n  \r\n  .input-qty {\r\n      text-align: center;\r\n      margin-top: -8px;\r\n      font-size: 13px;\r\n  }\r\n  \r\n  .item-size-qty{\r\n      width: 75% !important;\r\n  }\r\n  \r\n  .new-price-text-style {\r\n      color:  rgb(255, 38, 0) !important ;\r\n      margin-top: 10px;\r\n      margin-bottom: 0 !important ;\r\n      font-size: 14px;\r\n  }\r\n  \r\n  .image-product-style {\r\n      margin-top: 0;\r\n      width: 100px;\r\n  }\r\n  \r\n  .qty-button-style {\r\n      color: gray;\r\n      font-size: 25px;\r\n      margin-top: -25px;\r\n      margin-left: -3px;\r\n  }\r\n  \r\n  .qty-button-style1 {\r\n      color: gray;\r\n      font-size: 25px;\r\n      margin-top: -22px;\r\n      margin-left: -6px;\r\n  }\r\n  \r\n  .boder-button-qty {\r\n      border: 0 !important;\r\n  }\r\n  \r\n  .price-text-style {\r\n      color: lightgray;\r\n      text-decoration-line: line-through;\r\n      margin-top: 10px;\r\n      margin-bottom: 0 !important ;\r\n      font-size: 14px;\r\n  }\r\n  \r\n  .icon-del-style {\r\n      font-size: 20px;\r\n      color: gray;\r\n  }\r\n  \r\n  .div-prod-style {\r\n      border-top: solid 1px rgb(241, 241, 241);\r\n      padding-top: 10px;padding-bottom: 10px;\r\n  }\r\n  \r\n  .color-button-shop {\r\n      --background: #ff5722 !important;\r\n  }\r\n  \r\n`;\r\n@Component({\r\n  selector: 'app-ecommerce-cart',\r\n  template: HTML_TEMPLATE,\r\n  styles: [CSS_STYLE]\r\n})\r\nexport class EcommerceCartComponent implements OnInit {\r\n\r\n  @Input() datas: any;\r\n  @Output() cartDatas = new EventEmitter();\r\n\r\n  selectAll: Boolean = true;\r\n  selectItem: Boolean = true;\r\n\r\n  constructor(\r\n    private navCtrl: NavController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  addQty(i) {\r\n    i.qty++;\r\n    this.cartDatas.emit(this.datas);\r\n  }\r\n\r\n  deleteQty(i) {\r\n    if (i.qty > 1) {\r\n      i.qty--;\r\n      this.cartDatas.emit(this.datas);\r\n    }\r\n  }\r\n\r\n  selectAllProd(e, i) {\r\n    if (this.datas[i].flag) {\r\n      if (e) {\r\n        this.datas[i].shop.products.forEach(product => {\r\n          product.isChecked = true;\r\n          this.cartDatas.emit(this.datas);\r\n        });\r\n      } else {\r\n        this.datas[i].shop.products.forEach(product => {\r\n          product.isChecked = false;\r\n          this.cartDatas.emit(this.datas);\r\n        });\r\n      }\r\n      this.checkAllCheckbox(i);\r\n    }\r\n  }\r\n\r\n  checkAllCheckbox(i) {\r\n    this.datas[i].isChecked = true;\r\n    this.datas[i].shop.products.forEach(product => {\r\n      if (!product.isChecked) {\r\n        this.datas[i].isChecked = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  selectByItem(i, itm) {\r\n    this.datas[i].flag = false;\r\n    this.cartDatas.emit(this.datas);\r\n    this.checkAllCheckbox(i);\r\n  }\r\n\r\n  delProduct(i, idx) {\r\n    const confirm = window.confirm('ยืนยันการลบสินค้า');\r\n    if (confirm) {\r\n      this.datas[i].shop.products.splice(idx, 1);\r\n      this.cartDatas.emit(this.datas);\r\n    }\r\n  }\r\n\r\n  toHomePage() {\r\n    this.navCtrl.navigateForward('home');\r\n  }\r\n\r\n}\r\n"]}